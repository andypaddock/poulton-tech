jQuery(document).ready((function(e){if(console.warn("fgt",8),new fullpage("#fullpage",{verticalCentered:!1,scrollOverflow:!0,onLeave:function(e,t,o){console.warn("fgt",15);e.index},afterLoad:function(t,o,a){var n=e(o.item).attr("data-link"),i=e("#myMenu li");console.warn("fgt",27),e(i).removeClass("active"),e("#"+n).addClass("active"),e(".image-frame").attr("id",n+"Animation"),!0===o.isLast?e("#nextSection").fadeOut():e("#nextSection").fadeIn(),1==o.index&&"down"==a?e(".image-frame").removeClass("completeAnimation").addClass("active"):2==o.index&&"down"==a&&e(".image-frame").removeClass("completeAnimation").addClass("activeRugged"),1==o.isLast?(e(".image-frame").hide(),e(".image-frame").removeClass("active activeRugged").addClass("completeAnimation")):e(".image-frame").show()}}),e(document).on("click","#prevSection",(function(){fullpage_api.moveSectionUp()})),e(document).on("click","#nextSection",(function(e){e.preventDefault(),fullpage_api.moveSectionDown()})),e("html").delay(1500).queue((function(t){e(this).addClass("loaded"),t()})),e("nav a, a.button, a.next-section").click((function(){if("#"!=e(this).attr("href"))return e("html, body").animate({scrollTop:e(e(this).attr("href")).offset().top-100},500),!1})),e("#bell-map-contact").length>0&&JSON.parse(e("#bell-map-contact").attr("points"))){var t=JSON.parse(e("#bell-map-contact").attr("points"));mapboxgl.accessTpoultonn="pk.eyJ1Ijoic2lsdmVybGVzcyIsImEiOiJjaXNibDlmM2gwMDB2Mm9tazV5YWRmZTVoIn0.ilTX0t72N3P3XbzGFhUKcg";var o=new mapboxgl.Map({container:"bell-map-contact",style:"mapbox://styles/poulton/cjvnw465y0bl91cmionu5nqmo",center:t.geometry.coordinates,zoom:11,scrollZoom:!1});o.addControl(new mapboxgl.NavigationControl,"bottom-right");var a=new MapboxGeocoder({accessTpoultonn:mapboxgl.accessTpoultonn,marker:{color:"grey"},countries:"gb",mapboxgl:mapboxgl,flyTo:!1});o.addControl(a,"top-left");var n=[];({type:"FeatureCollection",features:[t]}).features.forEach((function(e){var t=document.createElement("div");t.className="marker",new mapboxgl.Marker(t).setLngLat(e.geometry.coordinates).setPopup(new mapboxgl.Popup({offset:25}).setHTML('<div class="title">The Bell <span>at</span> Ramsbury</div><div class="address">'+e.properties.address+'</div><div class="phone">'+e.properties.phone+'</div><div class="email">'+e.properties.email+"</div>")).addTo(o),t.addEventListener("click",(function(t){position=e.geometry.coordinates[1]-.02,o.flyTo({center:[e.geometry.coordinates[0],position],zoom:11})})),n.push(new mapboxgl.LngLat(e.geometry.coordinates[0],e.geometry.coordinates[1]))})),a.on("result",(function(e){var t=[],a=new mapboxgl.LngLat(e.result.geometry.coordinates[0],e.result.geometry.coordinates[1]);n.forEach((function(e){var o,n,i,s,l,r,c,d,m;t.push({point:e,distance:(o=a,n=e,6371e3,i=o.lat.toRadians(),s=n.lat.toRadians(),l=(n.lat-o.lat).toRadians(),r=(n.lng-o.lng).toRadians(),c=Math.sin(l/2)*Math.sin(l/2)+Math.cos(i)*Math.cos(s)*Math.sin(r/2)*Math.sin(r/2),d=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),m=6371e3*d,m)})}));var i=t.reduce((function(e,t){return e.distance<t.distance?e:t})),s=new mapboxgl.LngLatBounds;s.extend(i.point),s.extend(a),o.fitBounds(s,{padding:100})})),e(window).bind("mousewheel DOMMouseScroll",(function(e){1==e.ctrlKey?o.scrollZoom.enable():o.scrollZoom.disable()})),Number.prototype.toRadians=function(){return this*Math.PI/180}}e(".menu-trigger").on("click",(function(){e(this).toggleClass("clicked"),e(".hamburger").toggleClass("is-active"),e(".menuText").toggleClass("hideItem"),e(".offscreen-nav").toggleClass("show"),e(".on-page-nav").toggleClass("hideMenu")})),e(".read-more").click((function(){e(this).prev().slideToggle(),e(this).text("Read more"==e(this).text()?"Read less":"Read more")})),e.fn.isOnScreen=function(){var t=e(window),o={top:t.scrollTop(),left:t.scrollLeft()};o.right=o.left+t.width(),o.bottom=o.top+t.height();var a=this.offset();return a.right=a.left+this.outerWidth(),a.bottom=a.top+this.outerHeight(),!(o.right<a.left||o.left>a.right||o.bottom<a.top||o.top>a.bottom)},e(".slide-up, .slide-down, .slide-right, .slow-fade").each((function(){e(this).isOnScreen()&&e(this).addClass("active")})),e.fn.isInViewport=function(){var t=e(this).offset().top,o=t+e(this).outerHeight(),a=e(window).scrollTop(),n=a+e(window).height();return o>a&&t<n},e(window).on("resize scroll",(function(){e(".slide-up, .slide-down, .slide-right, .slow-fade").each((function(){e(this).isInViewport()&&e(this).addClass("active")}))}))}));